import { RMA } from '../../src/rma';
import { ohlc } from './data';

describe('Relative Moving Average (RMA)', () => {
    it('Base test', () => {
        const solvedData = [
            undefined,
            undefined,
            undefined,
            undefined,
            undefined,
            undefined,
            undefined,
            undefined,
            undefined,
            undefined,
            undefined,
            undefined,
            undefined,
            1134.0892857142858,
            1133.142193877551,
            1132.6934657434404,
            1132.2132181903376,
            1131.9694168910278,
            1131.5644585416687,
            1129.881997217264,
            1128.3582831303165,
            1126.1491200495798,
            1124.7970400460385,
            1125.4293943284642,
            1125.1244375907168,
            1123.5541206199512,
            1121.5852548613834,
            1120.2513080855701,
            1119.8355003651723,
            1118.268678910517,
            1117.2230589883375,
            1116.9835547748849,
            1117.6411580052504,
            1119.3953610048752,
            1120.6299780759555,
            1122.01855107053,
            1122.9100831369208,
            1123.3379343414265,
            1123.5387961741817,
            1124.0874535903117,
            1126.219778333861,
            1129.0047941671567,
            1132.353023155217,
            1135.235664358416,
            1137.4838311899578,
            1139.0492718192465,
        ];
        const local = new RMA(14);

        ohlc.forEach((tick, idx) => {
            const value = local.nextValue(tick.c);

            expect(value).toBe(solvedData[idx]);
        });
    });
});
